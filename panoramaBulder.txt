{"openapi":"3.0.2","info":{"title":"Panorama creation service API","description":"Сервис построения панорамного изображения","version":"v1"},"paths":{"/version":{"get":{"summary":"Возвращает текущую версию сервиса.","description":"Возвращает текущую версию сервиса.","operationId":"get_version_version_get","responses":{"200":{"description":"Текущая версия сервиса.","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/health":{"get":{"summary":"Get Health","description":"Возвращает статус проверки доступности сервиса.","operationId":"get_Health_health_get","responses":{"200":{"description":"Статус проверки доступности сервиса.","content":{"application/json":{"schema":{}}}}}}},"/api/v1/panorama/create":{"put":{"summary":"Put Panorama Create","description":"Создает панораму по принимаемым изображениям.","operationId":"put_panorama_create_api_v1_panorama_create_put","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_put_panorama_create_api_v1_panorama_create_put"}}},"required":true},"responses":{"200":{"description":"Изображение составленной панорамы (JPEG).","content":{"image/jpeg":{}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/panorama/coordinates/convert":{"post":{"summary":"Post Coordinates Convert","description":"Конвертирует все координаты bboxs из относительной камеры в относительную панораму.","operationId":"post_coordinates_convert_api_v1_panorama_coordinates_convert_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputCams"}}},"required":true},"responses":{"200":{"description":"Конвертированные координаты bbox на панорамном изображении.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OutputCams"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/panorama/metadata":{"get":{"summary":"Get Metadata","description":"Возвращает метаданные панорамного изображения.","operationId":"get_metadata_api_v1_panorama_metadata_get","responses":{"200":{"description":"Метаданные панорамного изображения.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PanoramaMetadata"}}}}}}},"/api/v1/panorama/get_config":{"get":{"summary":"Get Config","description":"Возвращает конфигурацию сервиса построения панорамы.","operationId":"get_config_api_v1_panorama_get_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PanoramaConfiguration"}}}}}}},"/api/v1/panorama/set_config":{"post":{"summary":"Set Config","description":"Обновляет конфигурацию сервиса построения панорамы.","operationId":"set_config_api_v1_panorama_set_config_post","requestBody":{"content":{"application/json":{"schema":{"title":"Config","allOf":[{"$ref":"#/components/schemas/PanoramaConfiguration"}],"default":{"ConfigurationCamera":{"CAM3":{"name":"CAM3","index":0,"overlay":0,"bound_threshold":0,"compensation":10,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam3_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":100,"right":50},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM2":{"name":"CAM2","index":1,"overlay":97,"bound_threshold":200,"compensation":17,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam2_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":50,"right":50},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM1":{"name":"CAM1","index":2,"overlay":100,"bound_threshold":130,"compensation":2,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam1_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":0,"right":30},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM8":{"name":"CAM8","index":3,"overlay":90,"bound_threshold":200,"compensation":7,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam8_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":30,"right":150},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM9":{"name":"CAM9","index":4,"overlay":150,"bound_threshold":100,"compensation":-17,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam9_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":250,"right":0},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM4":{"name":"CAM4","index":5,"overlay":35,"bound_threshold":70,"compensation":-14,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam4_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":0,"right":70},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM5":{"name":"CAM5","index":6,"overlay":100,"bound_threshold":200,"compensation":-20,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam5_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":57,"right":0},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}},"CAM6":{"name":"CAM6","index":7,"overlay":100,"bound_threshold":147,"compensation":-6,"path_test_image":"pythonScripts/panorama/images_generate_masks/Shalanda_test/2021-07-07_13-01-00-00_Cam6_1.jpg","SlicesFrame":{"top":0,"bottom":0,"left":10,"right":300},"WeightCorrection":{"a":0.0,"b":0.0,"c":0.0}}},"SizeFrame":{"width":1920,"height":1080},"ViewingAngle":{"start":-180,"end":180},"SlicePanorama":{"top":50,"bottom":50,"left":0,"right":0},"FiltersPanorama":{"vignette_correction":false,"color_correction":false}}}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/panorama/restart_server":{"get":{"summary":"Restart Server","description":"Перезагрузка сервера.","operationId":"restart_server_api_v1_panorama_restart_server_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/panorama/create_panorama_bbox":{"post":{"summary":"Post Panorama Create With Bbox","description":"Создает панораму по принимаемым изображениям, а также отображает bbox с камер.","operationId":"post_panorama_create_with_bbox_api_v1_panorama_create_panorama_bbox_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_post_panorama_create_with_bbox_api_v1_panorama_create_panorama_bbox_post"}}},"required":true},"responses":{"200":{"description":"Изображение составленной панорамы (JPEG), с отрисованными bbox.","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/panorama/coefficients_vignetting_correction":{"post":{"summary":"Post Coefficients Vignetting Correction","description":"Рассчитывает коэффициенты для коррекции виньетирования изображения.","operationId":"post_coefficients_vignetting_correction_api_v1_panorama_coefficients_vignetting_correction_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_post_coefficients_vignetting_correction_api_v1_panorama_coefficients_vignetting_correction_post"}}},"required":true},"responses":{"200":{"description":"Коэффициенты для коррекции виньетирования изображения.","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_post_coefficients_vignetting_correction_api_v1_panorama_coefficients_vignetting_correction_post":{"title":"Body_post_coefficients_vignetting_correction_api_v1_panorama_coefficients_vignetting_correction_post","required":["input_image_file"],"type":"object","properties":{"input_image_file":{"title":"Input Image File","type":"string","format":"binary"}}},"Body_post_panorama_create_with_bbox_api_v1_panorama_create_panorama_bbox_post":{"title":"Body_post_panorama_create_with_bbox_api_v1_panorama_create_panorama_bbox_post","required":["detections_cameras","input_images_file"],"type":"object","properties":{"detections_cameras":{"$ref":"#/components/schemas/InputCams"},"input_images_file":{"title":"Input Images File","type":"array","items":{"type":"string","format":"binary"}}}},"Body_put_panorama_create_api_v1_panorama_create_put":{"title":"Body_put_panorama_create_api_v1_panorama_create_put","required":["baseImages"],"type":"object","properties":{"baseImages":{"title":"Baseimages","type":"array","items":{"type":"string","format":"binary"}}}},"Box":{"title":"Box","required":["xtl","ytl","w","h"],"type":"object","properties":{"xtl":{"title":"Xtl","type":"number"},"ytl":{"title":"Ytl","type":"number"},"w":{"title":"W","type":"number"},"h":{"title":"H","type":"number"}},"description":"bbox dump format"},"CamMetadata":{"title":"CamMetadata","required":["sector","image_position"],"type":"object","properties":{"sector":{"$ref":"#/components/schemas/Sector"},"image_position":{"$ref":"#/components/schemas/Sector"}},"description":"Метаданные камеры, в панорамном изображении."},"ConfigurationCamera":{"title":"ConfigurationCamera","required":["name","index","overlay","bound_threshold","path_test_image"],"type":"object","properties":{"name":{"title":"Name","type":"string"},"index":{"title":"Index","type":"integer"},"overlay":{"title":"Overlay","type":"integer"},"bound_threshold":{"title":"Bound Threshold","type":"integer"},"compensation":{"title":"Compensation","type":"integer","default":0},"path_test_image":{"title":"Path Test Image","type":"string"},"SlicesFrame":{"title":"Slicesframe","allOf":[{"$ref":"#/components/schemas/SliceFrame"}],"default":{"top":0,"bottom":0,"left":0,"right":0}},"WeightCorrection":{"title":"Weightcorrection","allOf":[{"$ref":"#/components/schemas/WeightVignetteCorrection"}],"default":{"a":0,"b":0,"c":0}}},"description":"Объект конфигурации, отвечающий за настройки камеры."},"FiltersPanorama":{"title":"FiltersPanorama","type":"object","properties":{"vignette_correction":{"title":"Vignette Correction","type":"boolean","default":false},"color_correction":{"title":"Color Correction","type":"boolean","default":false}},"description":"Объект конфигурации, отвечающий за использования фильтров,\nпри построении панорамного изображения."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"InputCams":{"title":"InputCams","type":"object","properties":{"CAM1":{"title":"Cam1","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM2":{"title":"Cam2","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM3":{"title":"Cam3","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM4":{"title":"Cam4","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM5":{"title":"Cam5","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM6":{"title":"Cam6","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM7":{"title":"Cam7","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM8":{"title":"Cam8","type":"array","items":{"$ref":"#/components/schemas/Box"}},"CAM9":{"title":"Cam9","type":"array","items":{"$ref":"#/components/schemas/Box"}}}},"OutputBbox":{"title":"OutputBbox","required":["box","a1","a2"],"type":"object","properties":{"box":{"title":"Box","type":"array","items":{"$ref":"#/components/schemas/Point"}},"a1":{"title":"A1","type":"number"},"a2":{"title":"A2","type":"number"}}},"OutputCams":{"title":"OutputCams","type":"object","properties":{"CAM1":{"title":"Cam1","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM2":{"title":"Cam2","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM3":{"title":"Cam3","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM4":{"title":"Cam4","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM5":{"title":"Cam5","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM6":{"title":"Cam6","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM7":{"title":"Cam7","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM8":{"title":"Cam8","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]},"CAM9":{"title":"Cam9","type":"array","items":{"$ref":"#/components/schemas/OutputBbox"},"default":[]}}},"PanoramaConfiguration":{"title":"PanoramaConfiguration","required":["ConfigurationCamera","SizeFrame","ViewingAngle"],"type":"object","properties":{"ConfigurationCamera":{"title":"Configurationcamera","type":"object","additionalProperties":{"$ref":"#/components/schemas/ConfigurationCamera"}},"SizeFrame":{"$ref":"#/components/schemas/SizeFrame"},"ViewingAngle":{"$ref":"#/components/schemas/ViewingAngle"},"SlicePanorama":{"title":"Slicepanorama","allOf":[{"$ref":"#/components/schemas/SliceFrame"}],"default":{"top":0,"bottom":0,"left":0,"right":0}},"FiltersPanorama":{"title":"Filterspanorama","allOf":[{"$ref":"#/components/schemas/FiltersPanorama"}],"default":{"vignette_correction":false,"color_correction":false}}},"description":"Конфигурация сервиса построения панорамного изображения."},"PanoramaMetadata":{"title":"PanoramaMetadata","required":["size","camera_metadata","viewing_angle"],"type":"object","properties":{"size":{"$ref":"#/components/schemas/SizeFrame"},"camera_metadata":{"title":"Camera Metadata","type":"object","additionalProperties":{"$ref":"#/components/schemas/CamMetadata"}},"viewing_angle":{"$ref":"#/components/schemas/ViewingAngle"}},"description":"Метаданные панорамного изображения."},"Point":{"title":"Point","required":["x","y"],"type":"object","properties":{"x":{"title":"X","type":"integer"},"y":{"title":"Y","type":"integer"}}},"Sector":{"title":"Sector","required":["start","end"],"type":"object","properties":{"start":{"title":"Start","type":"number"},"end":{"title":"End","type":"number"}}},"SizeFrame":{"title":"SizeFrame","required":["width","height"],"type":"object","properties":{"width":{"title":"Width","type":"integer"},"height":{"title":"Height","type":"integer"}},"description":"Объект конфигурации, отвечающий за размер изображений с камер."},"SliceFrame":{"title":"SliceFrame","type":"object","properties":{"top":{"title":"Top","type":"integer","default":0},"bottom":{"title":"Bottom","type":"integer","default":0},"left":{"title":"Left","type":"integer","default":0},"right":{"title":"Right","type":"integer","default":0}},"description":"Объект конфигурации, отвечающий за параметры обрезки изображения."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"ViewingAngle":{"title":"ViewingAngle","type":"object","properties":{"start":{"title":"Start","type":"integer","default":-180},"end":{"title":"End","type":"integer","default":180}},"description":"Горизонтальный угол обзора панорамного изображения."},"WeightVignetteCorrection":{"title":"WeightVignetteCorrection","type":"object","properties":{"a":{"title":"A","type":"number","default":0},"b":{"title":"B","type":"number","default":0},"c":{"title":"C","type":"number","default":0}},"description":"Объект конфигурации, отвечающий за коэффициенты уровней контрастности,\nприменяемых к коррекции виньетирования."}}}}
