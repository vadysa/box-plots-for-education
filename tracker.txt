{"openapi":"3.0.2","info":{"title":"Tracker","version":"2.0"},"paths":{"/version":{"get":{"summary":"Возвращает текущую версию сервиса","description":"Возвращает текущую версию сервиса","operationId":"get_version_version_get","responses":{"200":{"description":"Текущая версия сервиса","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/health":{"get":{"summary":"Get Health","description":"Возвращает статус проверки доступности сервиса","operationId":"get_Health_health_get","responses":{"200":{"description":"Статус проверки доступности сервиса","content":{"application/json":{"schema":{}}}}}}},"/api/v1/tracker/full_info":{"get":{"summary":"Get Full","description":"Возвращает полную информацию об объекте по id","operationId":"get_full_api_v1_tracker_full_info_get","parameters":[{"required":true,"schema":{"title":"Track Id","type":"integer"},"name":"track_id","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tracker/ids":{"get":{"summary":"Get Ids","description":"Возвращаются id объектов, за которыми ведется наблюдение","operationId":"get_ids_api_v1_tracker_ids_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Ids Api V1 Tracker Ids Get","type":"array","items":{"type":"integer"}}}}}}}},"/api/v1/tracker/base_info":{"post":{"summary":"Push Data","description":"Возвращает базовую информацию об объектах, за которыми ведется наблюдение","operationId":"push_data_api_v1_tracker_base_info_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Input"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Push Data Api V1 Tracker Base Info Post","type":"array","items":{"$ref":"#/components/schemas/TrackOutput"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tracker/parameters/max_lost":{"get":{"summary":"Get Config Max Lost","description":"Возвращает количество кадров без детекции для удаления объекта","operationId":"get_config_max_lost_api_v1_tracker_parameters_max_lost_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/tracker/reset_tracker":{"get":{"summary":"Reset Tracker","description":"Сбрасывает трекер","operationId":"reset_tracker_api_v1_tracker_reset_tracker_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/tracker/get_config":{"get":{"summary":"Get Config","description":"Возвращает параметры трекера","operationId":"get_config_api_v1_tracker_get_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackerConfiguration"}}}}}}},"/api/v1/tracker/set_config":{"post":{"summary":"Set Tracker","description":"Задает параметры трекера","operationId":"set_tracker_api_v1_tracker_set_config_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackerConfiguration"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AveragingParameters":{"title":"AveragingParameters","type":"object","properties":{"radar_position":{"title":"Radar Position","type":"integer","default":20},"distance":{"title":"Distance","type":"integer","default":20},"speed":{"title":"Speed","type":"integer","default":20},"count_items_ship_class":{"title":"Count Items Ship Class","type":"integer","default":20},"count_items_bbox":{"title":"Count Items Bbox","type":"integer","default":10},"count_items_centers_bboxes":{"title":"Count Items Centers Bboxes","type":"integer","default":100}},"description":"Объект конфигурации, отвечающий за параметры усредненного ответа\n(количество элементов для усреднения)"},"Bounding_box":{"title":"Bounding_box","required":["box","a1","a2"],"type":"object","properties":{"box":{"title":"Box","type":"array","items":{"$ref":"#/components/schemas/Point"}},"a1":{"title":"A1","type":"number"},"a2":{"title":"A2","type":"number"}}},"CriteriaCombiningTracks":{"title":"CriteriaCombiningTracks","type":"object","properties":{"min_age":{"title":"Min Age","type":"integer","default":10},"min_age_which_track_old":{"title":"Min Age Which Track Old","type":"integer","default":40},"max_age_which_track_young":{"title":"Max Age Which Track Young","type":"integer","default":40}},"description":"Объект конфигурации, отвечающий за параметры для разделения треков\nна группы 'старых' и 'молодых' "},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"HeadingContext":{"title":"HeadingContext","type":"object","properties":{"LastUpdate":{"title":"Lastupdate","type":"number","format":"time-delta"},"UpdateCount":{"title":"Updatecount","type":"integer"},"HasValue":{"title":"Hasvalue","type":"boolean"},"Value":{"title":"Value","type":"number"}}},"Input":{"title":"Input","required":["tracker_input_context","objects","panorama_metadata"],"type":"object","properties":{"tracker_input_context":{"$ref":"#/components/schemas/TrackerInputContext"},"objects":{"title":"Objects","type":"array","items":{"$ref":"#/components/schemas/Single_input"}},"panorama_metadata":{"$ref":"#/components/schemas/Panorama_metadata"}}},"PanoramaParameters":{"title":"PanoramaParameters","required":["width_panorama","view_angle","width_stitching_roi_zone","stitching_centers_camers","width_frame","height_frame"],"type":"object","properties":{"width_panorama":{"title":"Width Panorama","type":"integer"},"view_angle":{"title":"View Angle","type":"number"},"width_stitching_roi_zone":{"title":"Width Stitching Roi Zone","type":"integer"},"stitching_centers_camers":{"title":"Stitching Centers Camers","type":"array","items":{"type":"integer"}},"width_frame":{"title":"Width Frame","type":"integer"},"height_frame":{"title":"Height Frame","type":"integer"}},"description":"Объект конфигурации, отвечающий за свойство панорамного изображения\nи кадра с камер"},"Panorama_metadata":{"title":"Panorama_metadata","required":["size","camera_metadata","viewing_angle"],"type":"object","properties":{"size":{"$ref":"#/components/schemas/Size"},"camera_metadata":{"title":"Camera Metadata","type":"object"},"viewing_angle":{"$ref":"#/components/schemas/ViewingAngle"}}},"Point":{"title":"Point","required":["x","y"],"type":"object","properties":{"x":{"title":"X","type":"integer"},"y":{"title":"Y","type":"integer"}}},"Position":{"title":"Position","required":["sector"],"type":"object","properties":{"sector":{"$ref":"#/components/schemas/Sector"},"distance":{"title":"Distance","type":"number"}}},"RateOfTurnContext":{"title":"RateOfTurnContext","type":"object","properties":{"LastUpdate":{"title":"Lastupdate","type":"number","format":"time-delta"},"UpdateCount":{"title":"Updatecount","type":"integer"},"HasValue":{"title":"Hasvalue","type":"boolean"},"Value":{"title":"Value","type":"number"}}},"Sector":{"title":"Sector","required":["start","end"],"type":"object","properties":{"start":{"title":"Start","type":"number"},"end":{"title":"End","type":"number"}}},"Single_input":{"title":"Single_input","required":["position","bounding_box","detection_confidence","class_confidence","ship_type"],"type":"object","properties":{"position":{"$ref":"#/components/schemas/Position"},"bounding_box":{"$ref":"#/components/schemas/Bounding_box"},"detection_confidence":{"title":"Detection Confidence","type":"number"},"class_confidence":{"title":"Class Confidence","type":"number"},"ship_type":{"title":"Ship Type","type":"string"},"features":{"title":"Features","type":"array","items":{"type":"string","format":"binary"}}}},"Size":{"title":"Size","required":["width","height"],"type":"object","properties":{"width":{"title":"Width","type":"integer"},"height":{"title":"Height","type":"integer"}}},"SpeedOverGroundContext":{"title":"SpeedOverGroundContext","type":"object","properties":{"LastUpdate":{"title":"Lastupdate","type":"number","format":"time-delta"},"UpdateCount":{"title":"Updatecount","type":"integer"},"HasValue":{"title":"Hasvalue","type":"boolean"},"Value":{"$ref":"#/components/schemas/Vector"}}},"SpeedOverWaterContext":{"title":"SpeedOverWaterContext","type":"object","properties":{"LastUpdate":{"title":"Lastupdate","type":"number","format":"time-delta"},"UpdateCount":{"title":"Updatecount","type":"integer"},"HasValue":{"title":"Hasvalue","type":"boolean"},"Value":{"$ref":"#/components/schemas/Vector2"}}},"TrackOutput":{"title":"TrackOutput","required":["track_id","bbox","class_name","a1","a2","confidence","lost_frame_count","input_index"],"type":"object","properties":{"track_id":{"title":"Track Id","type":"integer"},"bbox":{"title":"Bbox","type":"array","items":{"type":"integer"}},"class_name":{"title":"Class Name","type":"string"},"distance":{"title":"Distance","type":"integer","description":"Дистанция до объекта в метрах"},"a1":{"title":"A1","type":"number"},"a2":{"title":"A2","type":"number"},"confidence":{"title":"Confidence","type":"number"},"lost_frame_count":{"title":"Lost Frame Count","type":"integer","description":"Количество кадров с потери детекции"},"input_index":{"title":"Input Index","type":"integer"},"speed":{"title":"Speed","type":"number","description":"Скорость судна в узлах"}}},"TrackerConfiguration":{"title":"TrackerConfiguration","required":["averaging_parameters","panorama_parameters","validation_parameters","weighing_thresholds_parameters","criteria_combining_tracks"],"type":"object","properties":{"max_lost":{"title":"Max Lost","type":"integer","default":50},"max_len_history":{"title":"Max Len History","type":"integer","default":200},"verification_period":{"title":"Verification Period","type":"integer","default":20},"allowable_loss":{"title":"Allowable Loss","type":"integer","default":5},"prediction_depth":{"title":"Prediction Depth","type":"integer","default":10},"acceptable_age_track_prediction":{"title":"Acceptable Age Track Prediction","type":"integer","default":35},"multiplier_coordinate_bbox_y":{"title":"Multiplier Coordinate Bbox Y","type":"number","default":0.01},"averaging_parameters":{"$ref":"#/components/schemas/AveragingParameters"},"panorama_parameters":{"$ref":"#/components/schemas/PanoramaParameters"},"validation_parameters":{"$ref":"#/components/schemas/ValidationParameters"},"weighing_thresholds_parameters":{"$ref":"#/components/schemas/WeighingthresholdsParameters"},"criteria_combining_tracks":{"$ref":"#/components/schemas/CriteriaCombiningTracks"}},"description":"Объект конфигурации для трекера"},"TrackerInputContext":{"title":"TrackerInputContext","required":["time","heading","rate_of_turn","speed_over_ground","speed_over_water"],"type":"object","properties":{"time":{"title":"Time","type":"string","format":"date-time"},"heading":{"$ref":"#/components/schemas/HeadingContext"},"rate_of_turn":{"$ref":"#/components/schemas/RateOfTurnContext"},"speed_over_ground":{"$ref":"#/components/schemas/SpeedOverGroundContext"},"speed_over_water":{"$ref":"#/components/schemas/SpeedOverWaterContext"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"ValidationParameters":{"title":"ValidationParameters","type":"object","properties":{"min_bbox_h":{"title":"Min Bbox H","type":"integer","default":10},"min_bbox_w":{"title":"Min Bbox W","type":"integer","default":10},"min_bbox_diagonals":{"title":"Min Bbox Diagonals","type":"number","default":12},"min_similarity_features":{"title":"Min Similarity Features","type":"number","default":0.8},"max_distance_bbox":{"title":"Max Distance Bbox","type":"integer","default":5000},"min_confidence_detection":{"title":"Min Confidence Detection","type":"number","default":0.6},"max_iou":{"title":"Max Iou","type":"number","default":0.3}},"description":"Объект конфигурации, отвечающий за параметры валидационных критериев"},"Vector":{"title":"Vector","type":"object","properties":{"Speed":{"title":"Speed","type":"number"},"Course":{"title":"Course","type":"number"}}},"Vector2":{"title":"Vector2","type":"object","properties":{"X":{"title":"X","type":"number"},"Y":{"title":"Y","type":"number"}}},"ViewingAngle":{"title":"ViewingAngle","type":"object","properties":{"start":{"title":"Start","type":"integer","default":-180},"end":{"title":"End","type":"integer","default":180}}},"WeighingthresholdsParameters":{"title":"WeighingthresholdsParameters","type":"object","properties":{"max_threshold_euclid_distance_center":{"title":"Max Threshold Euclid Distance Center","type":"number","default":200},"max_threshold_distance":{"title":"Max Threshold Distance","type":"number","default":1},"max_threshold_ship_class":{"title":"Max Threshold Ship Class","type":"number","default":1},"max_threshold_features":{"title":"Max Threshold Features","type":"number","default":-0.3},"max_threshold_diagonal":{"title":"Max Threshold Diagonal","type":"number","default":1},"coefficient_euclid_distance_center":{"title":"Coefficient Euclid Distance Center","type":"number","default":1},"coefficient_distance":{"title":"Coefficient Distance","type":"number","default":0},"coefficient_ship_class":{"title":"Coefficient Ship Class","type":"number","default":100},"coefficient_features":{"title":"Coefficient Features","type":"number","default":100},"coefficient_diagonal":{"title":"Coefficient Diagonal","type":"number","default":0}},"description":"Объект конфигурации отвечает за пороговые значения сходства детекций\nи наблюдаемых целей, а также за коэффициенты метрики оценки сходства всех весов.\nПри превышении одного из пороговых значений детекция не будет\nрассматриваться как продолжение истории трека.\n(такая пара не валидная)"}}}}
